# Gemini-Vault

**Gemini-Vault** æ˜¯ä¸€ä¸ªä¸ºå•†ä¸šç”¨é€”æ‰“é€ çš„ã€é«˜æ€§èƒ½çš„ Google Gemini API ä»£ç†å’Œè´Ÿè½½å‡è¡¡å™¨ã€‚æœ¬é¡¹ç›®ä½¿ç”¨ Python å’Œ FastAPI æ„å»ºï¼Œä¸ºæ‚¨æä¾›ä¸€ä¸ªåšå®çš„åŸºç¡€æ¥å¯¹å¤–æä¾›å¯ç®¡ç†çš„ API æœåŠ¡ã€‚

æœ¬é¡¹ç›®ä»é›¶å¼€å§‹ç¼–å†™ï¼Œå…¶æ¶æ„è®¾è®¡å—åˆ°äº† `gemini-balance` é¡¹ç›®çš„å¯å‘ï¼Œä½†ä¸“ä¸ºå•†ä¸šåº”ç”¨åœºæ™¯è®¾è®¡ï¼Œæ ¸å¿ƒå…³æ³¨ç‚¹åœ¨äºç”¨æˆ·ç®¡ç†ã€API è®¡é‡å’Œç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

*   **é«˜æ€§èƒ½:** åŸºäº FastAPI æ„å»ºï¼Œæ”¯æŒå¼‚æ­¥ã€é«˜ååé‡çš„è¯·æ±‚å¤„ç†ã€‚
*   **æ™ºèƒ½è´Ÿè½½å‡è¡¡:** é€šè¿‡è½®è¯¢ä¸€ä¸ª Gemini API å¯†é’¥æ± æ¥æœ‰æ•ˆåˆ†é…è¯·æ±‚è´Ÿè½½ã€‚
*   **æ™ºèƒ½å®¹é”™æœºåˆ¶:**
    *   å½“æŸä¸ªå¯†é’¥è¯·æ±‚å¤±è´¥æ—¶ï¼Œè‡ªåŠ¨ä½¿ç”¨ä¸‹ä¸€ä¸ªå¯ç”¨å¯†é’¥è¿›è¡Œé‡è¯•ã€‚
    *   å½“æŸä¸ªå¯†é’¥è¿ç»­å¤±è´¥å¤šæ¬¡åï¼Œä¼šè‡ªåŠ¨å°†å…¶æš‚æ—¶ç¦ç”¨ï¼Œå¹¶åœ¨å†·å´æœŸåé‡æ–°å¯ç”¨ã€‚
*   **å…¼å®¹ OpenAI API:** å¯¹å¤–æš´éœ²ä¸€ä¸ªæ ‡å‡†çš„ `/v1/chat/completions` æ¥å£ï¼Œä½¿å…¶èƒ½å¤Ÿä¸å¤§é‡ç°æœ‰çš„å·¥å…·å’Œåº“æ— ç¼åä½œã€‚
*   **è‡ªåŠ¨åŒ–æŒç»­é›†æˆ/éƒ¨ç½² (CI/CD):**
    *   é¡¹ç›®å†…å« `Dockerfile`ï¼Œå¯è½»æ¾å°†åº”ç”¨å®¹å™¨åŒ–ã€‚
    *   é¢„å…ˆé…ç½®äº† GitHub Actions å·¥ä½œæµï¼Œèƒ½å¤Ÿè‡ªåŠ¨æ„å»º Docker é•œåƒå¹¶å°†å…¶æ¨é€åˆ° Docker Hubã€‚
*   **å¯æ‰©å±•çš„é…ç½®:** ä½¿ç”¨ Pydantic è¿›è¡Œç±»å‹å®‰å…¨å’Œç¯å¢ƒæ„ŸçŸ¥çš„é…ç½®ç®¡ç†ã€‚

---

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹

### 1. ç¯å¢ƒå‡†å¤‡

*   Docker
*   ä¸€ä¸ª GitHub è´¦å·
*   ä¸€ä¸ª Docker Hub è´¦å·

### 2. åˆå§‹åŒ–è®¾ç½®

1.  **åˆ›å»º GitHub ä»“åº“:** åœ¨ GitHub ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ï¼ˆç§æœ‰æˆ–å…¬å¼€å‡å¯ï¼‰ï¼Œå¹¶å°†æœ¬é¡¹ç›®çš„æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ ã€‚

2.  **é…ç½®ç¯å¢ƒå˜é‡æ–‡ä»¶:**
    *   å°†é¡¹ç›®ä¸­çš„ `.env.example` æ–‡ä»¶é‡å‘½åä¸º `.env`ã€‚
    *   æ‰“å¼€ `.env` æ–‡ä»¶å¹¶å¡«å…¥æ‚¨çš„é…ç½®ä¿¡æ¯ï¼Œå°¤å…¶æ˜¯æ‚¨çš„ `GEMINI_API_KEYS` åˆ—è¡¨ã€‚

3.  **é…ç½® GitHub Secrets:**
    *   åœ¨æ‚¨çš„æ–° GitHub ä»“åº“ä¸­ï¼Œå¯¼èˆªè‡³ `Settings` > `Secrets and variables` > `Actions`ã€‚
    *   æ·»åŠ ä»¥ä¸‹ä¸¤ä¸ªä»“åº“ç§˜å¯†å˜é‡ (Repository secrets):
        *   `DOCKERHUB_USERNAME`: æ‚¨çš„ Docker Hub ç”¨æˆ·åã€‚
        *   `DOCKERHUB_TOKEN`: æ‚¨çš„ Docker Hub è®¿é—®ä»¤ç‰Œ (Access Token)ã€‚

### 3. è‡ªåŠ¨åŒ–éƒ¨ç½² (CI/CD)

*   å®Œæˆä¸Šè¿°è®¾ç½®åï¼Œåªéœ€å°†ä»£ç  `git push` åˆ°æ‚¨ GitHub ä»“åº“çš„ `main` åˆ†æ”¯ã€‚
*   `.github/workflows/main.yml` ä¸­å®šä¹‰çš„ GitHub Actions å·¥ä½œæµå°†è‡ªåŠ¨è§¦å‘ã€‚å®ƒä¼šæ„å»º Docker é•œåƒï¼Œå¹¶å°†å…¶æ¨é€åˆ°æ‚¨çš„ Docker Hub è´¦æˆ·ä¸‹ï¼Œé•œåƒåç§°é»˜è®¤ä¸º `your-username/gemini-vault:latest`ã€‚

### 4. æ‰‹åŠ¨éƒ¨ç½² (ä»¥ ClawCloud ä¸ºä¾‹)

å½“æ‚¨çš„é•œåƒæˆåŠŸæ¨é€åˆ° Docker Hub åï¼Œæ‚¨å¯ä»¥å°†å…¶éƒ¨ç½²åˆ°ä»»ä½•æ”¯æŒå®¹å™¨çš„äº‘å¹³å°ã€‚

1.  ç™»å½•æ‚¨çš„äº‘å¹³å° (ä¾‹å¦‚ ClawCloud)ã€‚
2.  åˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨æˆ–æœåŠ¡ã€‚
3.  **é•œåƒåç§° (Image Name):** å¡«å…¥æ‚¨åœ¨ Docker Hub ä¸Šçš„å®Œæ•´é•œåƒåœ°å€ (ä¾‹å¦‚ `your-dockerhub-username/gemini-vault:latest`)ã€‚
4.  **å®¹å™¨ç«¯å£ (Container Port):** è®¾ç½®ä¸º `8000`ã€‚
5.  **ç¯å¢ƒå˜é‡ (Environment Variables):** **è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚** æ‚¨å¿…é¡»å°†æœ¬åœ° `.env` æ–‡ä»¶ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹ï¼Œé€ä¸€å¤åˆ¶å¹¶æ·»åŠ åˆ°å¹³å°çš„ç¯å¡«å˜é‡é…ç½®ä¸­ã€‚
6.  å¯åŠ¨éƒ¨ç½²ã€‚

---

## âš™ï¸ API ä½¿ç”¨æ–¹æ³•

éƒ¨ç½²æˆåŠŸåï¼Œæ‚¨çš„æœåŠ¡å°†å¯ä»¥é€šè¿‡äº‘å¹³å°æä¾›çš„ URL è¿›è¡Œè®¿é—®ã€‚

*   **æ¥å£åœ°å€:** `POST /v1/chat/completions`
*   **è¯·æ±‚ä½“ (Body):** è¯¥æ¥å£æ¥å—ä¸ OpenAI Chat Completions API å®Œå…¨ç›¸åŒçš„ JSON è¯·æ±‚ä½“ã€‚

**`curl` è°ƒç”¨ç¤ºä¾‹:**

```bash
curl -X POST "http://your-deployment-url/v1/chat/completions" \
-H "Content-Type: application/json" \
-d '{
  "model": "gemini-1.5-flash-latest",
  "messages": [
    {
      "role": "user",
      "content": "ä½ å¥½ï¼Œæ³•å›½çš„é¦–éƒ½æ˜¯å“ªé‡Œï¼Ÿ"
    }
  ]
}'
